
#ifndef _VERSION_H_
#define _VERSION_H_

#define GIT_RETRIEVED_STATE @GIT_RETRIEVED_STATE@ 
#define GIT_HEAD_SHA1       0x@GIT_HEAD_SHA1@
#define GIT_DESCRIBE        0x@GIT_DESCRIBE@UL
#define GIT_IS_DIRTY        @GIT_IS_DIRTY@

#define GIT_TAG         @GIT_TAG@
#define GIT_FW_VER_TYPE @GIT_FW_VER_TYPE@
#define GIT_FW_VER_MAJ  @GIT_FW_VER_MAJ@
#define GIT_FW_VER_MIN  @GIT_FW_VER_MIN@
#define GIT_FW_VER_REV  @GIT_FW_VER_REV@

#define GIT_AUTHOR_NAME  "@GIT_AUTHOR_NAME@"
#define GIT_AUTHOR_EMAIL "@GIT_AUTHOR_EMAIL@"

#define GIT_COMMIT_DATE_ISO8601 "@GIT_COMMIT_DATE_ISO8601@"
#define GIT_COMMIT_SUBJECT      "@GIT_COMMIT_SUBJECT@"
#define GIT_COMMIT_BODY         @GIT_COMMIT_BODY@

#define FW_BUILD_DATE __DATE__

/******************************************************************************/
struct fw_info_s 
{
    unsigned char type[4];
    unsigned char version[4];
    unsigned long sha_digest;
    unsigned char dirty;
    char tag[16];
    char commit_date[28];
    char build_date[15];
};

#define DECLARE_FWINFO() \
__attribute__((used)) const struct fw_info_s sFwInfo = \
{ \
    .type        = {GIT_FW_VER_TYPE}, \
    .version     = {0, GIT_FW_VER_MAJ, GIT_FW_VER_MIN, GIT_FW_VER_REV}, \
    .sha_digest  = GIT_DESCRIBE, \
    .dirty       = GIT_IS_DIRTY, \
    .tag         = GIT_TAG, \
    .commit_date = GIT_COMMIT_DATE_ISO8601, \
    .build_date  = FW_BUILD_DATE, \
};

extern const struct fw_info_s sFwInfo;

/******************************************************************************/
#define HW_NAME    "@HW_NAME@"
#define HW_VENDOR  "@HW_VENDOR@"
#define HW_MODEL   "@HW_MODEL@"
#define HW_DATE    "@HW_DATE@"

#define HW_VER_MAJ @HW_VER_MAJ@
#define HW_VER_MIN @HW_VER_MIN@
#define HW_VER_REV @HW_VER_REV@

struct hw_info_s 
{
    char name[15];
    char vendor[15];
    char model[10];
    unsigned char version[4];
    char date[20];
};

#define DECLARE_HWINFO() \
__attribute__((used)) const struct hw_info_s sHwInfo = \
{ \
    .name    = HW_NAME, \
    .vendor  = HW_VENDOR, \
    .model   = HW_MODEL, \
    .version = {0, HW_VER_MAJ, HW_VER_MIN, HW_VER_REV}, \
    .date    = HW_DATE, \
};

extern const struct hw_info_s sHwInfo;

/******************************************************************************/

#endif /* _VERSION_H_ */
